{% extends 'core/base.html' %}

{% block title %}ToDo's - Site Features & Notes{% endblock %}

{% block extra_css %}
    .header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, #1a2234, #151a27);
      border-radius: 15px;
      border: 1px solid #2a2f3a;
    }
    h1 { 
      font-weight: 700; 
      margin-bottom: 10px; 
      color: #3b82f6;
    }
    .subtitle {
      color: #b4bdc6;
      font-size: 1.1em;
    }
    .back-btn {
      display: inline-block;
      margin-bottom: 20px;
      padding: 10px 20px;
      background: linear-gradient(180deg, #1a2234, #151a27);
      color: #e6e9ef;
      text-decoration: none;
      border-radius: 8px;
      border: 1px solid #2a2f3a;
      transition: all 0.2s ease;
    }
    .back-btn:hover {
      border-color: #3b82f6;
      background: linear-gradient(180deg, #1f2a40, #171e2e);
    }
    .add-btn {
      display: inline-block;
      margin-bottom: 20px;
      padding: 12px 24px;
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
      text-decoration: none;
      border-radius: 10px;
      font-weight: 600;
      transition: all 0.2s ease;
    }
    .add-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }
    .todo-card {
      background: linear-gradient(135deg, #1a2234, #151a27);
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 20px;
      border: 1px solid #2a2f3a;
      transition: all 0.2s ease;
    }
    .todo-card:hover {
      transform: translateY(-2px);
      border-color: #3b82f6;
    }
    .todo-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }
    .todo-title {
      font-size: 1.4em;
      font-weight: 700;
      color: #e6e9ef;
      margin: 0;
      flex: 1;
      margin-right: 15px;
    }
    .todo-actions {
      display: flex;
      gap: 10px;
    }
    .btn {
      padding: 8px 16px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9em;
      transition: all 0.2s ease;
    }
    .btn-edit {
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      color: white;
    }
    .btn-delete {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
    }
    .btn:hover {
      transform: translateY(-1px);
    }
    .todo-meta {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    .meta-item {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 0.9em;
    }
    .meta-label {
      color: #b4bdc6;
    }
    .meta-value {
      color: #e6e9ef;
      font-weight: 600;
    }
    .priority {
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 0.8em;
      font-weight: 600;
    }
    .priority-low { background: #6b7280; color: white; }
    .priority-medium { background: #3b82f6; color: white; }
    .priority-high { background: #f59e0b; color: white; }
    .priority-urgent { background: #ef4444; color: white; }
    .status {
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 0.8em;
      font-weight: 600;
    }
    .status-pending { background: #6b7280; color: white; }
    .status-in_progress { background: #3b82f6; color: white; }
    .status-completed { background: #10b981; color: white; }
    .status-cancelled { background: #ef4444; color: white; }
    .todo-description {
      color: #b4bdc6;
      line-height: 1.6;
      margin-bottom: 15px;
    }
    .todo-dates {
      display: flex;
      gap: 20px;
      font-size: 0.9em;
      color: #b4bdc6;
    }
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #b4bdc6;
    }
    .empty-state h3 {
      color: #e6e9ef;
      margin-bottom: 15px;
    }
    .messages {
      margin-bottom: 20px;
    }
    .alert {
      padding: 15px 20px;
      border-radius: 10px;
      margin-bottom: 15px;
      font-weight: 600;
    }
    .alert-success {
      background: rgba(16, 185, 129, 0.2);
      color: #10b981;
      border: 1px solid #10b981;
    }
    .alert-error {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
      border: 1px solid #ef4444;
    }
{% endblock %}

{% block content %}
    <a href="{% url 'home' %}" class="back-btn">‚Üê Back to Home</a>
    
    <div class="header">
      <h1>ToDo's</h1>
      <div class="subtitle">Site Features & Notes</div>
    </div>

    {% if messages %}
      <div class="messages">
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <a href="{% url 'todo_create' %}" class="add-btn">+ Add New ToDo</a>

    {% if todos %}
      {% for todo in todos %}
        <div class="todo-card">
          <div class="todo-header">
            <h3 class="todo-title">{{ todo.title }}</h3>
            <div class="todo-actions">
              <a href="{% url 'todo_update' todo.pk %}" class="btn btn-edit">Edit</a>
              <a href="{% url 'todo_delete' todo.pk %}" class="btn btn-delete">Delete</a>
            </div>
          </div>
          
          <div class="todo-meta">
            <div class="meta-item">
              <span class="meta-label">Priority:</span>
              <span class="priority priority-{{ todo.priority }}">{{ todo.get_priority_display }}</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">Status:</span>
              <span class="status status-{{ todo.status }}">{{ todo.get_status_display }}</span>
            </div>
            {% if todo.due_date %}
              <div class="meta-item">
                <span class="meta-label">Due:</span>
                <span class="meta-value">{{ todo.due_date|date:"M d, Y H:i" }}</span>
              </div>
            {% endif %}
          </div>
          
          {% if todo.description %}
            <div class="todo-description">
              {{ todo.description|linebreaks }}
            </div>
          {% endif %}
          
          <div class="todo-dates">
            <div>Created: {{ todo.created_at|date:"M d, Y H:i" }}</div>
            <div>Updated: {{ todo.updated_at|date:"M d, Y H:i" }}</div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <div class="empty-state">
        <h3>No ToDo's yet</h3>
        <p>Start by adding your first feature idea or note!</p>
      </div>
    {% endif %}
{% endblock %}
