<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}LeetCode Daily{% endblock %}</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body { 
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; 
      margin: 0; 
      padding: 20px; 
      background: #0b0f19; 
      color: #e6e9ef; 
      line-height: 1.6;
      position: relative;
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    /* Animated Background */
    .tech-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: 0;
      transition: opacity 2s ease-in-out;
    }
    
    .tech-background.active {
      opacity: 0.15;
    }
    
    /* Wallpaper 1: Circuit Board */
    .wallpaper-6 {
      background: 
        radial-gradient(circle at 20% 80%, #00ff88 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, #0088ff 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, #ff0088 0%, transparent 50%),
        linear-gradient(45deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
      background-size: 400px 400px, 300px 300px, 500px 500px, 100% 100%;
      animation: circuitPulse 8s ease-in-out infinite;
    }
    
    /* Wallpaper 2: Digital Rain */
    .wallpaper-2 {
      background: 
        linear-gradient(90deg, transparent 0%, #00ff88 1px, transparent 1px),
        linear-gradient(0deg, transparent 0%, #0088ff 1px, transparent 1px),
        linear-gradient(45deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
      background-size: 20px 20px, 20px 20px, 100% 100%;
      animation: digitalRain 6s linear infinite;
    }
    
    /* Wallpaper 3: Neon Grid */
    .wallpaper-3 {
      background: 
        linear-gradient(90deg, #00ff88 1px, transparent 1px),
        linear-gradient(0deg, #00ff88 1px, transparent 1px),
        radial-gradient(circle at 50% 50%, #0088ff 0%, transparent 70%),
        linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
      background-size: 50px 50px, 50px 50px, 200px 200px, 100% 100%;
      animation: neonGlow 10s ease-in-out infinite;
    }
    
    /* Wallpaper 4: Holographic */
    .wallpaper-4 {
      background: 
        conic-gradient(from 0deg at 50% 50%, #ff0088, #00ff88, #0088ff, #ff0088),
        linear-gradient(45deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
      background-size: 300px 300px, 100% 100%;
      background-blend-mode: overlay;
      animation: holographic 12s linear infinite;
    }
    
    /* Wallpaper 5: Matrix Code */
    .wallpaper-5 {
      background: 
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          #00ff88 2px,
          #00ff88 4px
        ),
        repeating-linear-gradient(
          90deg,
          transparent,
          transparent 2px,
          #0088ff 2px,
          #0088ff 4px
        ),
        linear-gradient(45deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
      background-size: 30px 30px, 30px 30px, 100% 100%;
      animation: matrixFlow 7s linear infinite;
    }
    
    /* Wallpaper 6: Cyberpunk City */
    .wallpaper-1 {
      background: 
        radial-gradient(circle at 10% 20%, #ff0088 0%, transparent 30%),
        radial-gradient(circle at 90% 80%, #00ff88 0%, transparent 30%),
        radial-gradient(circle at 50% 50%, #0088ff 0%, transparent 40%),
        linear-gradient(45deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
      background-size: 600px 600px, 400px 400px, 800px 800px, 100% 100%;
      animation: cyberpunkPulse 9s ease-in-out infinite;
    }
    
    /* Animations */
    @keyframes circuitPulse {
      0%, 100% { transform: scale(1) rotate(0deg); }
      50% { transform: scale(1.1) rotate(180deg); }
    }
    
    @keyframes digitalRain {
      0% { background-position: 0 0, 0 0, 0 0; }
      100% { background-position: 20px 20px, 20px 20px, 0 0; }
    }
    
    @keyframes neonGlow {
      0%, 100% { filter: brightness(1) hue-rotate(0deg); }
      50% { filter: brightness(1.2) hue-rotate(180deg); }
    }
    
    @keyframes holographic {
      0% { transform: rotate(0deg) scale(1); }
      100% { transform: rotate(360deg) scale(1.1); }
    }
    
    @keyframes matrixFlow {
      0% { background-position: 0 0, 0 0, 0 0; }
      100% { background-position: 30px 30px, 30px 30px, 0 0; }
    }
    
    @keyframes cyberpunkPulse {
      0%, 100% { 
        transform: scale(1);
        filter: hue-rotate(0deg);
      }
      33% { 
        transform: scale(1.05);
        filter: hue-rotate(120deg);
      }
      66% { 
        transform: scale(1.1);
        filter: hue-rotate(240deg);
      }
    }
    
    /* Floating Particles */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }
    
    .particle {
      position: absolute;
      width: 2px;
      height: 2px;
      background: #00ff88;
      border-radius: 50%;
      animation: float 15s infinite linear;
    }
    
    .particle:nth-child(2n) {
      background: #0088ff;
      animation-duration: 20s;
    }
    
    .particle:nth-child(3n) {
      background: #ff0088;
      animation-duration: 25s;
    }
    
    @keyframes float {
      0% {
        transform: translateY(100vh) translateX(0);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) translateX(100px);
        opacity: 0;
      }
    }
    
    /* Content Container */
    .container { 
      max-width: 1200px; 
      margin: 0 auto; 
      position: relative;
      z-index: 10;
      background: rgba(11, 15, 25, 0.8);
      border-radius: 15px;
      padding: 20px;
      margin-top: 20px;
    }
    
    /* Wallpaper Indicator */
    .wallpaper-indicator {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.7);
      color: #00ff88;
      padding: 10px 15px;
      border-radius: 20px;
      font-size: 0.8em;
      font-weight: 600;
      z-index: 1000;
      border: 1px solid #00ff88;
      backdrop-filter: blur(10px);
      cursor: pointer;
      transition: all 0.3s ease;
      user-select: none;
    }
    
    .wallpaper-indicator:hover {
      background: rgba(0, 255, 136, 0.2);
      border-color: #00ff88;
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
    }
    
    .wallpaper-indicator:active {
      transform: scale(0.95);
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      
      .wallpaper-indicator {
        top: 10px;
        right: 10px;
        font-size: 0.7em;
        padding: 8px 12px;
      }
    }
    
    {% block extra_css %}{% endblock %}
  </style>
</head>
<body>
  <!-- Animated Background -->
  <div class="tech-background wallpaper-1 active" id="wallpaper-1"></div>
  <div class="tech-background wallpaper-2" id="wallpaper-2"></div>
  <div class="tech-background wallpaper-3" id="wallpaper-3"></div>
  <div class="tech-background wallpaper-4" id="wallpaper-4"></div>
  <div class="tech-background wallpaper-5" id="wallpaper-5"></div>
  <div class="tech-background wallpaper-6" id="wallpaper-6"></div>
  
  <!-- Floating Particles -->
  <div class="particles" id="particles"></div>
  
  <!-- Wallpaper Indicator -->
  <div class="wallpaper-indicator" id="wallpaper-indicator">
    Wallpaper 1/6
  </div>
  
  
  <!-- Main Content -->
  <div class="container">
    {% block content %}{% endblock %}
  </div>
  
  <script>
    // Wallpaper rotation system
    let currentWallpaper = parseInt(localStorage.getItem('currentWallpaper')) || 1;
    const totalWallpapers = 6;
    const rotationInterval = 10 * 60 * 1000; // 10 minutes in milliseconds
    
    const wallpaperNames = [
      'Cyberpunk City',
      'Digital Rain', 
      'Neon Grid',
      'Holographic',
      'Matrix Code',
      'Circuit Board'
    ];
    
    function changeWallpaper() {
      console.log('Changing wallpaper from', currentWallpaper);
      
      // Hide current wallpaper
      const currentElement = document.getElementById(`wallpaper-${currentWallpaper}`);
      if (currentElement) {
        currentElement.classList.remove('active');
        console.log('Removed active class from wallpaper', currentWallpaper);
      }
      
      // Move to next wallpaper
      currentWallpaper = currentWallpaper >= totalWallpapers ? 1 : currentWallpaper + 1;
      console.log('Switching to wallpaper', currentWallpaper);
      
      // Show new wallpaper
      const newElement = document.getElementById(`wallpaper-${currentWallpaper}`);
      if (newElement) {
        newElement.classList.add('active');
        console.log('Added active class to wallpaper', currentWallpaper);
      }
      
      // Update indicator with color change for visual feedback
      const indicator = document.getElementById('wallpaper-indicator');
      if (indicator) {
        indicator.textContent = `Wallpaper ${currentWallpaper}/6 - ${wallpaperNames[currentWallpaper - 1]}`;
        indicator.style.borderColor = `hsl(${currentWallpaper * 60}, 70%, 50%)`;
        indicator.style.color = `hsl(${currentWallpaper * 60}, 70%, 50%)`;
        console.log('Updated indicator text and color');
      }
      
      // Save current wallpaper to localStorage
      localStorage.setItem('currentWallpaper', currentWallpaper.toString());
      console.log('Saved wallpaper', currentWallpaper, 'to localStorage');
    }
    
    // Create floating particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = 50;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 15 + 's';
        particle.style.animationDuration = (15 + Math.random() * 10) + 's';
        particlesContainer.appendChild(particle);
      }
    }
    
    // Initialize wallpaper from saved state
    function initializeWallpaper() {
      console.log('Initializing wallpaper from localStorage:', currentWallpaper);
      
      // Remove active class from all wallpapers
      for (let i = 1; i <= totalWallpapers; i++) {
        const element = document.getElementById(`wallpaper-${i}`);
        if (element) {
          element.classList.remove('active');
        }
      }
      
      // Set the saved wallpaper as active
      const activeElement = document.getElementById(`wallpaper-${currentWallpaper}`);
      if (activeElement) {
        activeElement.classList.add('active');
        console.log('Set wallpaper', currentWallpaper, 'as active');
      }
      
      // Update indicator
      const indicator = document.getElementById('wallpaper-indicator');
      if (indicator) {
        indicator.textContent = `Wallpaper ${currentWallpaper}/6 - ${wallpaperNames[currentWallpaper - 1]}`;
        indicator.style.borderColor = `hsl(${currentWallpaper * 60}, 70%, 50%)`;
        indicator.style.color = `hsl(${currentWallpaper * 60}, 70%, 50%)`;
      }
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM loaded, initializing wallpaper system...');
      console.log('Current wallpaper from localStorage:', currentWallpaper);
      
      createParticles();
      
      // Check if all wallpaper elements exist
      for (let i = 1; i <= totalWallpapers; i++) {
        const element = document.getElementById(`wallpaper-${i}`);
        if (element) {
          console.log(`Wallpaper ${i} element found`);
        } else {
          console.error(`Wallpaper ${i} element NOT found!`);
        }
      }
      
      // Initialize wallpaper from saved state
      initializeWallpaper();
      
      // Check indicator element
      const indicator = document.getElementById('wallpaper-indicator');
      if (indicator) {
        console.log('Wallpaper indicator element found');
        
        // Manual wallpaper change on click (for testing)
        indicator.addEventListener('click', function() {
          console.log('Wallpaper indicator clicked!');
          changeWallpaper();
        });
      } else {
        console.error('Wallpaper indicator element NOT found!');
      }
      
      // Start wallpaper rotation
      setInterval(changeWallpaper, rotationInterval);
      console.log('Wallpaper system initialized successfully');
    });
  </script>
  
  {% block extra_js %}{% endblock %}
</body>
</html>
